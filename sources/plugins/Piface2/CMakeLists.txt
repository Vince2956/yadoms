# include common plugin definitions

if(CMAKE_YADOMS_PLATFORM STREQUAL "Raspberry")

   include("../YadomsPluginsCommon.cmake")

   #########################################
   ## Place here all the plugin source files
   #########################################
   set(PIFACE2_PLUGIN_SOURCES
      stdafx.h
      stdafx.cpp
      eventDefinitions.h
      IIO.h
      InitializationException.hpp
      IO.h
      IO.cpp
      IOManager.h
      IOManager.cpp
      IPf2Configuration.h
      Pf2Configuration.h
      Pf2Configuration.cpp
      Piface2.h
      Piface2.cpp
      Piface2Factory.h
      Piface2Factory.cpp
      SPIException.hpp
   )

   ADD_SUBDIRECTORY(libmcp23s17)  
   ADD_SUBDIRECTORY(libpifacedigital)
    
   #########################################
   ## Place here all additional groups (solution folder)
   #########################################
   source_group(sources ./*.*)

   #########################################
   ## Place here all additional include directories
   ## (by default yadoms-shared and boost are included)
   #########################################

   set(PIFACE2_PLUGIN_ADDITIONAL_INC_DIR
       ${PIFACE2DIGITAL_INCLUDE_DIRECTORY}
       ${MCP23S17_INCLUDE_DIRECTORY})

   set(PIFACE2_PLUGIN_INCLDIR  
       ${CMAKE_CURRENT_SOURCE_DIR})

   #########################################
   ## Place here all additional libraries to link with
   ## (by default yadoms-shared and boost are included)
   #########################################

   set(PIFACE2_PLUGIN_LINK
      mcp23s17
      pifacedigital
   )

   #########################################
   ## Place here all additional compiler flags
   ## i.e. : for raspberry to link with wiringPi : use add_definition("-lwiringPi")
   #########################################

   #########################################
   ## Always leave these lines to configure plugin correctly
   ## even if FAKE_PLUGIN_INCLDIR or FAKE_PLUGIN_LINK are empty
   #########################################

   PLUGIN_SOURCES(Piface2 ${PIFACE2_PLUGIN_SOURCES})
   PLUGIN_INCLDIR(Piface2 ${PIFACE2_PLUGIN_INCLDIR} ${PIFACE2_PLUGIN_ADDITIONAL_INC_DIR})
   PLUGIN_LINK   (Piface2 ${PIFACE2_PLUGIN_LINK})

endif()
